{
  "active": false,
  "connections": {
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Construct & Execute LLM Prompt",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Store conversation history": {
      "ai_memory": [
        [
          {
            "node": "Construct & Execute LLM Prompt",
            "type": "ai_memory",
            "index": 0
          },
          {
            "node": "When chat message received",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "When chat message received": {
      "main": [
        [
          {
            "node": "Construct & Execute LLM Prompt",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-05-05T19:27:59.293Z",
  "id": "EFQ09FloDWuJffoO",
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "Automate Smarter Money Habits ‚Äì Launch Your AI Finance Coach with LangChain + Gemini + n8n",
  "nodes": [
    {
      "parameters": {
        "public": true,
        "initialMessages": "",
        "options": {
          "allowedOrigins": "*",
          "loadPreviousSession": "memory",
          "responseMode": "lastNode"
        }
      },
      "id": "1e8f9a68-b0ae-4881-8b2d-9ec690efa79d",
      "name": "When chat message received",
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "position": [
        20,
        260
      ],
      "webhookId": "bfe3a11e-4e95-4338-bb8e-7e8832271508",
      "typeVersion": 1.1
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.0-flash-exp",
        "options": {
          "temperature": 0.7,
          "safetySettings": {
            "values": [
              {
                "category": "HARM_CATEGORY_SEXUALLY_EXPLICIT",
                "threshold": "BLOCK_NONE"
              }
            ]
          }
        }
      },
      "id": "aa73c29d-911e-483a-bfbe-0b0593156404",
      "name": "Google Gemini Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "position": [
        320,
        500
      ],
      "typeVersion": 1,
      "credentials": {
        "googlePalmApi": {
          "id": "NfT134BOD89kq6qA",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {},
      "id": "7bb7f464-b215-4adf-9a19-c04ee30980a4",
      "name": "Store conversation history",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "position": [
        520,
        500
      ],
      "notesInFlow": false,
      "typeVersion": 1.3
    },
    {
      "parameters": {
        "code": {
          "execute": {
            "code": "const { PromptTemplate } = require('@langchain/core/prompts');\nconst { ConversationChain } = require('langchain/chains');\nconst { BufferMemory } = require('langchain/memory');\n\nconst template = `\nYou are roleplaying as a world-class AI Personal Finance Coach, engineered to deliver elite-level financial insight with precision and impact. Your persona is that of a seasoned strategist with deep expertise across personal finance, wealth psychology, and results-driven financial planning. You combine data-driven analysis with behavioral insight to guide users toward optimal financial decisions. Your tone is confident, disciplined, and empowering ‚Äî focused entirely on action, progress, and clarity.\n\nThe user addresses you as ‚ÄúCoach,‚Äù and you refer to them as ‚ÄúPartner.‚Äù\n\nOperating Principles:\n\nCommunicate solely in English\n\nEliminate all interrogative forms ‚Äî no questions, only statements\n\nPrioritize brevity and clarity; avoid theoretical or overly detailed exposition\n\nContext Framework:\n\nPrior conversation: {chat_history}\n\nUser input: {input}\n\nDomains of Mastery:\n\nBudget structuring and precision cash flow management\n\nStrategic debt elimination and credit optimization\n\nLong-term asset-building through savings and investments\n\nBehavior-driven financial habit design\n\nGoal-specific financial blueprints (retirement, property, freedom planning)\n\nDeliver insights with authority and intention. Translate financial complexity into clear, actionable direction that accelerates your Partner‚Äôs financial momentum.\n`;\n\nconst prompt = new PromptTemplate({\n  template: template,\n  inputVariables: [\"input\", \"chat_history\"], \n});\n\nconst items = this.getInputData();\nconst model = await this.getInputConnectionData('ai_languageModel', 0);\nconst memory = await this.getInputConnectionData('ai_memory', 0);\nmemory.returnMessages = false;\n\nconst chain = new ConversationChain({ llm:model, memory:memory, prompt: prompt, inputKey:\"input\", outputKey:\"output\"});\nconst output = await chain.call({ input: items[0].json.chatInput});\n\nreturn output;\n"
          }
        },
        "inputs": {
          "input": [
            {
              "type": "main",
              "maxConnections": 1,
              "required": true
            },
            {
              "type": "ai_languageModel",
              "maxConnections": 1,
              "required": true
            },
            {
              "type": "ai_memory",
              "maxConnections": 1,
              "required": true
            }
          ]
        },
        "outputs": {
          "output": [
            {
              "type": "main"
            }
          ]
        }
      },
      "id": "5bb81ead-650a-4c68-a33b-8fc7dd54aa44",
      "name": "Construct & Execute LLM Prompt",
      "type": "@n8n/n8n-nodes-langchain.code",
      "position": [
        620,
        260
      ],
      "retryOnFail": false,
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "üëÜ **Memory Control**\nAdjust conversation history length in the `Store Conversation History` node  ",
        "height": 140,
        "width": 200
      },
      "id": "fabc4307-2470-4aaa-b7c6-c4178d450845",
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        480,
        680
      ],
      "typeVersion": 1
    }
  ],
  "pinData": {},
  "repo_name": null,
  "repo_owner": null,
  "repo_path": null,
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [
    {
      "createdAt": "2025-04-28T18:16:58.775Z",
      "updatedAt": "2025-04-28T18:16:58.775Z",
      "id": "5fWvt038qtjyrogG",
      "name": "Ready For Production"
    }
  ],
  "triggerCount": 1,
  "updatedAt": "2025-05-05T20:42:16.000Z",
  "versionId": "3f63f221-86e9-412f-a6d6-aac083296109"
}